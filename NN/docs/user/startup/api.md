# Работа с API

Навигация:

- [Swagger](#swagger)
- [cURL](#curl)
  - [Пример cURL запроса](#пример-curl-запроса)

---

## Swagger

Swagger можно использовать для тестов API. Для его использования необходимо включить Swagger в скрипте конфигурации, для чего в файле [`configs/production.sh`](../../../configs/production.sh) измените значение переменной `CORTEX_API_ENABLE_SWAGGER` на `true`.

После запуска сервера Swagger будет доступен по пути `/swagger` *(например: [0.0.0.0:8080/swagger](http://0.0.0.0:8080/swagger))*.

---

## cURL

Отправка запросов к сегментам через cURL производится следующей командой:

```shell
curl -X 'POST' \
  'http://<хост>:<порт>/<имя_сегмента>/<имя_роутера>' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '<запрос_в_виде_json_объекта>'
```

После успешного выполнения запроса придет ответ в виде JSON объекта.

> **Note**
>
> О формате запроса и ответа конкретного сегмента см. в информации об этом сегменте.

### Пример cURL запроса

Запрос к тестовой модели CDR, при сервере запущеном локально на стандартном порте будет выглядеть так:

```shell
curl -X 'POST' \
  'http://0.0.0.0:8080/dialogue_replying/test' \
  -H 'accept: application/json' \
  -H 'Content-Type: application/json' \
  -d '{
  "query": "Привет."
}'
```

Ответ в данном случае будет таким:

```json
{
  "response": "Здраствуй."
}
```

> **Note**
>
> Ответ может отличаться, в зависимости от обученной модели.
